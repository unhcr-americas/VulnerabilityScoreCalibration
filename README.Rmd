---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# Vulnerability Score Calibration

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![Codecov test coverage](https://codecov.io/gh/unhcr-americas/VulnerabilityScoreCalibration/branch/main/graph/badge.svg)](https://app.codecov.io/gh/unhcr-americas/VulnerabilityScoreCalibration?branch=main)
<!-- badges: end -->

The usage of Vulnerability Scores is among the key tools to implement when specific humanitarian Interventions, such as Cash Based Assistance, requires to be targeted and prioritized for certain beneficiaries.  

One challenge is to configure scoring formulas that allows to reflects __compounded vulnerabilities__, i.e. when different criteria interact with each others. It is therefore important to prevent "compensability" (_meaning one criteria can be compensated by another one_). To do that, geometric aggregations of indicators should be  preferred over arithmetic aggregations (aka multiplying rather than summing up indicators). This implies to properly weight each of the criteria used to build the scoring formula. 

In an ideal world of [statistical inclusion](https://egrisstats.org/recommendations/), a representative dataset of the population should be accessible and such weighting would be performed using a variety of statistical models such as [Proxy Mean Testing](https://jpia.princeton.edu/news/accuracy-proxy-means-tests-immigrant-populations-case-study-colombia) or [Item Response Theory](https://www.researchgate.net/publication/344948652_A_dimensionality_assessment_of_refugees%27_vulnerability_through_an_Item_Response_Theory_approach) to name a few... In the reality of most humanitarian contexts, using expert opinions remains the default option. In such environment, experts can mean both humanitarian workers, authority representatives and refugees and other displaced communities leaders. Providing an opportunity for such local community leader to have their word to say is indeed a key element of [accountability to affected population](https://emergency.unhcr.org/protection/protection-principles/accountability-affected-people-aap). One challenge in such context is therefore to generate a consensus on the selection and relative importance of assistance targeting criteria.

> “If we have data, let's look at the data. If all we have are opinions, let's go with mine.” Jim Barksdale

The `{VulnerabilityScoreCalibration}` package provides easy access to advanced methods for the calibration of vulnerability scorecard through __expert opinions__. It aims at enabling a process to quickly build buy-in and consensus among consulted experts while ensuring full transparency. It combines two approaches based on specific type of surveys that can be used to consults the experts:

 * __Quadratic Voting__: A decision-making and consensus-building method where voting power increases quadratically, allowing individuals to express stronger preferences. It is used to assess the relevance of indicators (selection) -See an [example of quadratic voting form](https://enketo.unhcr.org/single/JAHCDSJD).
 * __Conjoint Analysis__: A research technique that assesses preferences by presenting individuals with various criteria in combination to determine their relative importance. It is used to measure the importance of the criteria levels (weighting) - See an [example of conjoint review form](https://enketo.unhcr.org/single/0J8BjS86).
 
 Typically, this would be used in the context of a dedicated short workshop where experts will be given to the opportunity to reflect on what vulnerability means within their specific context and understand the requirement on criteria formulation to build effective scoring formula. Then the two consultations are organised (basically a survey to fill within [kobo](https://kobo.unhcr.org)) and expert can quickly review the results to ensure consensus building within a short time frame.
 
 Please consult the vignette for a more [thorough presentation](https://unhcr-americas.github.io/VulnerabilityScoreCalibration/articles/VulnerabilityScoreCalibration.html)

## Process

The objective of the process is to create a __vulnerability screening questionnaire__ in kobotoolbox. The questionnaire will include calculated indicators that will summarize the qualitative response through a quantitative index. For the questionnaire to be short, user-friendly and effective, it needs to include only the minimum set of questions and response that are identified by experts as the most relevant to the specific operational context.

To implement the approach, beside the workshop facilitation, key technical tasks needs to be performed. They mostly consist in the customization of standard questionnaire and the generation of the results in a format that can be easily consumed by experts within the workshop. For effective facilitation, those tasks should be performed as quickly as possible during the time frame of a minimum one-day presential workshop.

This approach has been [initially designed](https://humanitarian-user-group.github.io/post/conjoint-analysis/) and now extensively tested by UNHCR within the Americas Region. The resulting tools have been packaged within 4 functions reflecting the different technical tasks in the process:

 1. [`quadratic_prepare`](https://unhcr-americas.github.io/VulnerabilityScoreCalibration/reference/quadratic_prepare.html) - based on an initially filtered list of indicators (max 25 indicators in 5 groups of max 5 indicators), Data expert build the [xlsform file](http://xlsform.org) used in kobotoolbox to consult the experts about the relevance of each indicators.  
 
 2. [`quadratic_review`](https://unhcr-americas.github.io/VulnerabilityScoreCalibration/reference/quadratic_review.html) - based on the form and data collected from the experts, generate a slide deck used to review the results from the consultation.  This slide deck should be used through a joint data interpretation session to further narrow-down the initial list of max 25 indicators. Field Experts are being introduced to the process before filling the kobo form -Eventually this stage is repeated if there is a lot of disagreement among experts. The output is the selection max 12 indicators for the next stage 
 
 3. [`conjoint_prepare`](https://unhcr-americas.github.io/VulnerabilityScoreCalibration/reference/conjoint_prepare.html) - based on a restricted list of criteria and response options within each criteria, build the [xlsform file](http://xlsform.org) used in kobotoolbox to consult the experts about the importance of each criteria. This involves the mapping of responses options for the questions linked to the indicator to max 3 to 4 vulnerability criteria levels.  
 
 4. [`conjoint_review`](https://unhcr-americas.github.io/VulnerabilityScoreCalibration/reference/conjoint_review.html) - based on the form and data collected from the experts, generate a slide deck used to review the results from the consultation together with a xlsform file with the weights for the score.   -Eventually this stage is repeated if there is a lot of disagreement among experts. Then based on the mapping of criteria to response options , the screening questionnaire with calculated scores as xlsform is generated and Data expert can revise the final xlsform for vulnerability scoring implementing the weights defined through the previous stage  
 
 In addition, the package includes a default __library of indicators/criteria/questions/responses__ that can be used to quick-start the design. Please do not hesitate to contribute to the improvement of the library by sending a [ticket](https://github.com/unhcr-americas/VulnerabilityScoreCalibration/issues/new/choose)

## Usage / Installation

The package functions are directly accessible through a dedicated shiny app @ http://rstudio.unhcr.org/Vulnerability_Score_Calibration 

To run the function locally from within [Rstudio Desktop](https://posit.co/download/rstudio-desktop/), once installed the right version of [Rtools](https://cran.r-project.org/bin/windows/Rtools/), you can install the development version of {`VulnerabilityScoreCalibration`} from [GitHub](https://github.com/) with:

``` r
install.packages("pak")
pak::pkg_install("unhcr-americas/VulnerabilityScoreCalibration")
```

Feel free to raise issues and ask questions through a [ticket](https://github.com/unhcr-americas/VulnerabilityScoreCalibration/issues/new/choose)
