---
title: "Package Functions with examples"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r development, include=FALSE}
library(testthat)
```

```{r development-load}
# Load already included functions if relevant
pkgload::load_all(export_all = FALSE)
```

# Demo data 

The following dataset has been anonymised from one of the field implementation. 


# Quadratic Voting
 
## prepare_quadratic
    
```{r function-prepare_quadratic}
#' Title
#' 
#' Description
#' 
#' @return
#' 
#' @export
prepare_quadratic <- function(){
    
}
```
  
```{r example-prepare_quadratic}
prepare_quadratic()
```
  
```{r tests-prepare_quadratic}
test_that("prepare_quadratic works", {
  expect_true(inherits(prepare_quadratic, "function")) 
})
```

## mod_prepare_quadratic


```{r function-mod_prepare_quadratic}

#' prepare_quadratic UI Function
#'
#' @description A shiny Module.
#'
#' @param id,input,output,session Internal parameters for {shiny}.
#'
#' @noRd 
#'
#' @importFrom shiny NS tagList 
mod_prepare_quadratic_ui <- function(id){
  ns <- NS(id)
  tagList(
 
  )
}
    
#' prepare_quadratic Server Functions
#'
#' @noRd 
mod_prepare_quadratic_server <- function(id){
  moduleServer( id, function(input, output, session){
    ns <- session$ns
 
  })
}
    
## To be copied in the UI
# mod_prepare_quadratic_ui("prepare_quadratic_1")
    
## To be copied in the server
# mod_prepare_quadratic_server("prepare_quadratic_1")

```
  
```{r example-mod_prepare_quadratic}
#mod_prepare_quadratic()
```
  
```{r tests-mod_prepare_quadratic}
testServer(
  mod_prepare_quadratic_server,
  # Add here your module params
  args = list()
  , {
    ns <- session$ns
    expect_true(
      inherits(ns, "function")
    )
    expect_true(
      grepl(id, ns(""))
    )
    expect_true(
      grepl("test", ns("test"))
    )
    # Here are some examples of tests you can
    # run on your module
    # - Testing the setting of inputs
    # session$setInputs(x = 1)
    # expect_true(input$x == 1)
    # - If ever your input updates a reactiveValues
    # - Note that this reactiveValues must be passed
    # - to the testServer function via args = list()
    # expect_true(r$x == 1)
    # - Testing output
    # expect_true(inherits(output$tbl$html, "html"))
})
 
test_that("module ui works", {
  ui <- mod_prepare_quadratic_ui(id = "test")
  golem::expect_shinytaglist(ui)
  # Check that formals have not been removed
  fmls <- formals(mod_prepare_quadratic_ui)
  for (i in c("id")){
    expect_true(i %in% names(fmls))
  }
})
 

```
  

## review_quadratic
    
```{r function-review_quadratic}
#' Title
#' 
#' Description
#' 
#' @return
#' 
#' @export
review_quadratic <- function(){
    
}
```
  
```{r example-review_quadratic}
review_quadratic()
```
  
```{r tests-review_quadratic}
test_that("review_quadratic works", {
  expect_true(inherits(review_quadratic, "function")) 
})
```
  
  
  
## mod_review_quadratic
    
```{r function-mod_review_quadratic}

#' prepare_quadratic UI Function
#'
#' @description A shiny Module.
#'
#' @param id,input,output,session Internal parameters for {shiny}.
#'
#' @noRd 
#'
#' @importFrom shiny NS tagList 
mod_review_quadratic_ui <- function(id){
  ns <- NS(id)
  tagList(
 
  )
}
    
#' prepare_quadratic Server Functions
#'
#' @noRd 
mod_review_quadratic_server <- function(id){
  moduleServer( id, function(input, output, session){
    ns <- session$ns
 
  })
}
    
## To be copied in the UI
# mod_review_quadratic_ui("review_quadratic_1")
    
## To be copied in the server
# mod_review_quadratic_server("review_quadratic_1")

```
  
```{r example-mod_review_quadratic}
#mod_review_quadratic()
```
  
```{r tests-mod_review_quadratic}
testServer(
  mod_review_quadratic_server,
  # Add here your module params
  args = list()
  , {
    ns <- session$ns
    expect_true(
      inherits(ns, "function")
    )
    expect_true(
      grepl(id, ns(""))
    )
    expect_true(
      grepl("test", ns("test"))
    )
    # Here are some examples of tests you can
    # run on your module
    # - Testing the setting of inputs
    # session$setInputs(x = 1)
    # expect_true(input$x == 1)
    # - If ever your input updates a reactiveValues
    # - Note that this reactiveValues must be passed
    # - to the testServer function via args = list()
    # expect_true(r$x == 1)
    # - Testing output
    # expect_true(inherits(output$tbl$html, "html"))
})
 
test_that("module ui works", {
  ui <- mod_review_quadratic_ui(id = "test")
  golem::expect_shinytaglist(ui)
  # Check that formals have not been removed
  fmls <- formals(mod_review_quadratic_ui)
  for (i in c("id")){
    expect_true(i %in% names(fmls))
  }
})
 

```


# Conjoint Analysis 

## prepare_conjoint
    
```{r function-prepare_conjoint}
#' Title
#' 
#' Description
#' 
#' @return
#' 
#' @export
prepare_conjoint <- function(){
    
}
```
  
```{r example-prepare_conjoint}
prepare_conjoint()
```
  
```{r tests-prepare_conjoint}
test_that("prepare_conjoint works", {
  expect_true(inherits(prepare_conjoint, "function")) 
})
```

## mod_prepare_conjoint

```{r function-mod_prepare_conjoint}

#' review_conjoint UI Function
#'
#' @description A shiny Module.
#'
#' @param id,input,output,session Internal parameters for {shiny}.
#'
#' @noRd 
#'
#' @importFrom shiny NS tagList 
mod_prepare_conjoint_ui <- function(id){
  ns <- NS(id)
  tagList(
 
  )
}
    
#' review_conjoint Server Functions
#'
#' @noRd 
mod_prepare_conjoint_server <- function(id){
  moduleServer( id, function(input, output, session){
    ns <- session$ns
 
  })
}
    
## To be copied in the UI
# mod_prepare_conjoint_ui("prepare_conjoint_1")
    
## To be copied in the server
# mod_prepare_conjoint_server("prepare_conjoint_1")

```
  
```{r example-mod_prepare_conjoint}
#mod_prepare_conjoint()
```
  
```{r tests-mod_prepare_conjoint}
testServer(
  mod_prepare_conjoint_server,
  # Add here your module params
  args = list()
  , {
    ns <- session$ns
    expect_true(
      inherits(ns, "function")
    )
    expect_true(
      grepl(id, ns(""))
    )
    expect_true(
      grepl("test", ns("test"))
    )
    # Here are some examples of tests you can
    # run on your module
    # - Testing the setting of inputs
    # session$setInputs(x = 1)
    # expect_true(input$x == 1)
    # - If ever your input updates a reactiveValues
    # - Note that this reactiveValues must be passed
    # - to the testServer function via args = list()
    # expect_true(r$x == 1)
    # - Testing output
    # expect_true(inherits(output$tbl$html, "html"))
})
 
test_that("module ui works", {
  ui <- mod_prepare_conjoint_ui(id = "test")
  golem::expect_shinytaglist(ui)
  # Check that formals have not been removed
  fmls <- formals(mod_prepare_conjoint_ui)
  for (i in c("id")){
    expect_true(i %in% names(fmls))
  }
})
 
```
    
  
## review_conjoint
    
```{r function-review_conjoint}
#' Title
#' 
#' Description
#' 
#' @return
#' 
#' @export
review_conjoint <- function(){
    
}
```
  
```{r example-review_conjoint}
review_conjoint()
```
  
```{r tests-review_conjoint}
test_that("review_conjoint works", {
  expect_true(inherits(review_conjoint, "function")) 
})
```
         
 
## mod_review_conjoint
    
```{r function-mod_review_conjoint}

#' review_conjoint UI Function
#'
#' @description A shiny Module.
#'
#' @param id,input,output,session Internal parameters for {shiny}.
#'
#' @noRd 
#'
#' @importFrom shiny NS tagList 
mod_review_conjoint_ui <- function(id){
  ns <- NS(id)
  tagList(
 
  )
}
    
#' review_conjoint Server Functions
#'
#' @noRd 
mod_review_conjoint_server <- function(id){
  moduleServer( id, function(input, output, session){
    ns <- session$ns
 
  })
}
    
## To be copied in the UI
# mod_review_conjoint_ui("review_conjoint_1")
    
## To be copied in the server
# mod_review_conjoint_server("review_conjoint_1")

```
  
```{r example-mod_review_conjoint}
#mod_review_conjoint()
```
  
```{r tests-mod_review_conjoint}

```
  


# mod_home
    
```{r function-mod_home}
#' home UI Function
#'
#' @description A shiny Module.
#'
#' @param id,input,output,session Internal parameters for {shiny}.
#'
#' @noRd 
#'
#' @importFrom shiny NS tagList 
mod_home_ui <- function(id){
  ns <- NS(id)
 tagList( 
        #Jumbotrons are pretty, they make nice headers
                  tags$div(class = "jumbotron text-left", 
                           style = "margin-bottom:15px;margin-top:15px;margin-left:15px",
                          fluidRow(
                            column( 10, 
                                    tags$h1(style = 'color:#0072BC;',
                                                style = 'margin-bottom:0px;margin-top:0px',
                                                'Consulting Experts')),
                            column( 2, 
                                    tags$i(style = 'font-size: 12rem;color:#0072BC;',
                                           class = "fa-solid fa-stethoscope")
                                    )
                          ) ,
                          fluidRow(
                            column( 4,  
                                    tags$h3(class = 'jumbotron-heading', 
                                                style = 'margin-left:25px',
                                                ' "  ' ),
                                    tags$h3(class = 'jumbotron-heading', 
                                            style = 'margin-left:25px',
                                            '  "')),
                            column( 8, 
                                    tags$p(class = 'jumbotron-heading', 
                                            style = 'margin-left:25px',
                                            '  ' ),
                                    tags$p(class = 'jumbotron-heading', 
                                            style = 'margin-left:25px',
                                            '  ' )
                                    )
                          ) 
                   ), ## end jumbotron..
                  
                  br(),
                  br(),
                    p('  App content')
                
  )
}
    
#' home Server Functions
#'
#' @noRd 
mod_home_server <- function(id){
  moduleServer( id, function(input, output, session){
    ns <- session$ns
 
  })
}
    
## To be copied in the UI
# mod_home_ui("home_1")
    
## To be copied in the server
# mod_home_server("home_1")
```
  
```{r example-mod_home}
#mod_home()
```
  
 
  




```{r development-inflate, eval=FALSE}
# Run but keep eval=FALSE to avoid infinite loop
# Execute in the console directly
fusen::inflate(flat_file = "dev/package_functions.Rmd",
               check = TRUE,
               document = TRUE,
               overwrite = TRUE, 
               vignette_name = "Package Functions with examples")
```

